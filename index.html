<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VeryVeryGoodNews - US Stocks & Gold</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #f4f4f4;
            color: #333;
        }
        header {
            background: #1a73e8;
            color: #fff;
            padding: 1rem;
            text-align: center;
            font-size: 1.2rem;
        }
        .container {
            padding: 1rem;
        }
        h2 { margin-top: 1.5rem; }
        .news, .charts, .alerts {
            margin-top: 1rem;
            background: #fff;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        iframe {
            width: 100%;
            height: 400px;
            border: none;
        }
        @media (max-width: 768px) {
            iframe { height: 300px; }
        }
        button, input {
            margin-top: 0.5rem;
            padding: 0.5rem;
            font-size: 1rem;
        }
        button {
            cursor: pointer;
            background: #1a73e8;
            color: #fff;
            border: none;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <header>
        üåü VeryVeryGoodNews - US Stocks & Gold üåü
    </header>

    <div class="container">
        <!-- ‡∏Ç‡πà‡∏≤‡∏ß‡∏´‡∏∏‡πâ‡∏ô -->
        <div class="news">
            <h2>üì∞ ‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
            <div id="news-container">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πà‡∏≤‡∏ß...</div>
            <button onclick="fetchNews()">‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πà‡∏≤‡∏ß</button>
        </div>

        <!-- ‡∏Å‡∏£‡∏≤‡∏ü‡∏´‡∏∏‡πâ‡∏ô & ‡∏ó‡∏≠‡∏á -->
        <div class="charts">
            <h2>üìä ‡∏Å‡∏£‡∏≤‡∏ü‡∏™‡∏î</h2>
            <h3>S&P500</h3>
            <iframe src="https://www.tradingview.com/embed-widget/symbol-overview/?symbol=SPX"></iframe>

            <h3>VOO</h3>
            <iframe src="https://www.tradingview.com/embed-widget/symbol-overview/?symbol=VOO"></iframe>

            <h3>NVDA</h3>
            <iframe src="https://www.tradingview.com/embed-widget/symbol-overview/?symbol=NVDA"></iframe>

            <h3>QQQI</h3>
            <iframe src="https://www.tradingview.com/embed-widget/symbol-overview/?symbol=QQQI"></iframe>

            <h3>‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥</h3>
            <iframe src="https://www.tradingview.com/embed-widget/symbol-overview/?symbol=GOLD"></iframe>
        </div>

        <!-- ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤ -->
        <div class="alerts">
            <h2>üîî ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤</h2>
            <label>‡∏´‡∏∏‡πâ‡∏ô/‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥: </label>
            <select id="symbol">
                <option value="VOO">VOO</option>
                <option value="NVDA">NVDA</option>
                <option value="QQQI">QQQI</option>
                <option value="GOLD">‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥</option>
            </select><br>
            <label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: </label>
            <input type="number" id="alert-price" step="0.01"><br>
            <button onclick="setAlert()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</button>
            <ul id="alert-list"></ul>
        </div>
    </div>

    <script>
        // ------------------- ‡∏Ç‡πà‡∏≤‡∏ß‡∏´‡∏∏‡πâ‡∏ô -------------------
        async function fetchNews() {
            const newsContainer = document.getElementById('news-container');
            newsContainer.innerHTML = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πà‡∏≤‡∏ß...';
            try {
                const response = await fetch('https://api.sampleapis.com/fakebank/stocks'); 
                const data = await response.json();
                let html = '<ul>';
                data.slice(0, 5).forEach(item => {
                    html += `<li><a href="${item.url}" target="_blank">${item.title}</a></li>`;
                });
                html += '</ul>';
                newsContainer.innerHTML = html;
            } catch (error) {
                newsContainer.innerHTML = '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πà‡∏≤‡∏ß‡πÑ‡∏î‡πâ';
                console.error(error);
            }
        }
        fetchNews();
        setInterval(fetchNews, 120000);

        // ------------------- ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤ -------------------
        let alerts = JSON.parse(localStorage.getItem('alerts') || '[]');

        function showAlerts() {
            const alertList = document.getElementById('alert-list');
            alertList.innerHTML = '';
            alerts.forEach((a, idx) => {
                alertList.innerHTML += `<li>${a.symbol} ‡∏£‡∏≤‡∏Ñ‡∏≤ ${a.price} USD <button onclick="removeAlert(${idx})">‡∏•‡∏ö</button></li>`;
            });
        }

        function setAlert() {
            const symbol = document.getElementById('symbol').value;
            const price = parseFloat(document.getElementById('alert-price').value);
            if (!price) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
            alerts.push({symbol, price});
            localStorage.setItem('alerts', JSON.stringify(alerts));
            showAlerts();
            alert('‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
        }

        function removeAlert(idx) {
            alerts.splice(idx, 1);
            localStorage.setItem('alerts', JSON.stringify(alerts));
            showAlerts();
        }

        showAlerts();

        // ------------------- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -------------------
        async function checkAlerts() {
            for (let alertItem of alerts) {
                const price = alertItem.price;
                const symbol = alertItem.symbol;
                try {
                    const res = await fetch(`https://query1.finance.yahoo.com/v7/finance/quote?symbols=${symbol}`);
                    const data = await res.json();
                    const currentPrice = data.quoteResponse.result[0].regularMarketPrice;
                    if ((symbol !== 'GOLD' && currentPrice >= price) || (symbol === 'GOLD' && currentPrice >= price)) {
                        alert(`üîî ${symbol} ‡∏ñ‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ: ${currentPrice} USD`);
                        alerts = alerts.filter(a => !(a.symbol === symbol && a.price === price));
                        localStorage.setItem('alerts', JSON.stringify(alerts));
                        showAlerts();
                    }
                } catch(err) {
                    console.error('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô', err);
                }
            }
        }

        setInterval(checkAlerts, 120000);
    </script>
</body>
</html>
